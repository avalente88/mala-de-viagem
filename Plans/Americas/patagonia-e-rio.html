<!DOCTYPE html>
<html lang="pt">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Plano de Viagem ‚Äî Patag√≥nia 2026</title>
      <link rel="stylesheet" href="/styles/styles.css" />
      <link rel="stylesheet" href="/styles/datepicker.css" />
      <script type="module" src="/scripts/itinerary.js"></script>
      <script type="module" src="/scripts/render.js"></script>
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400..700&family=Great+Vibes&display=swap" rel="stylesheet">
      <script>
         // Aplica data-labels a todas as TD com base no texto dos TH
         function applyDataLabels(table) {
           if (!table) return;
           const ths = Array.from(table.querySelectorAll('thead th'));
           if (!ths.length) return;
         
           // Extrai os textos dos TH (tratando espa√ßos e quebras)
           const headers = ths.map(th => (th.textContent || '').replace(/\s+/g, ' ').trim());
         
           // Aplica em cada TD
           table.querySelectorAll('tbody tr').forEach(tr => {
             Array.from(tr.children).forEach((td, i) => {
               const label = headers[i] || '';
               if (label) td.setAttribute('data-label', label);
             });
           });
         }
         
         // Aplica aos seletores desejados
         function makeStackedTables(...selectors) {
           selectors.forEach(sel => {
             document.querySelectorAll(sel).forEach(applyDataLabels);
           });
         }
         
         // Corre quando o DOM estiver pronto
         document.addEventListener('DOMContentLoaded', function() {
           makeStackedTables('#voos table', '#hoteis table');
         
           // OPCIONAL: se a tua p√°gina renderiza/atualiza tabelas via JS depois do load
           // ativa este observer para voltar a aplicar labels quando o tbody mudar
           const observer = new MutationObserver(() => {
             makeStackedTables('#voos table', '#hoteis table');
           });
           document.querySelectorAll('#voos table tbody, #hoteis table tbody').forEach(tbody => {
             observer.observe(tbody, { childList: true, subtree: true });
           });
         });
      </script>
   </head>
   <body>
      <!-- Top Navigation Bar -->
      <nav class="top-navbar">
         <ul>
            <li><a href="/index.html">Home</a></li>
            <li><a href="/contacts.html">Contactos</a></li>
         </ul>
      </nav>
      <!-- Hero -->
      <header class="header-top" id="home">
         <div class="profile-container">
            <img src="/Images/Designer.png" alt="Mala de Sonhos by Ana Valente">
         </div>
      </header>
      <main class="container">
         <!-- Resumo -->
         <section id="resumo" class="card">
            <h2 class="section-title">Resumo</h2>
            <div class="grid-2">
               <div>
                  <p><strong>Itiner√°rio:</strong> Lisboa ‚Üí Santiago do Chile ‚Üí Patag√≥nia Chilena ‚Üí Patag√≥nia Argentina ‚Üí Buenos Aires ‚Üí Rio de Janeiro ‚Üí Lisboa</p>
               </div>
               <div>
                  <div class="left" style="width: 50%">
                     <p class="total">N√∫mero de dias: 21</p>
                  </div>
                  <div class="right" style="width: 50%">
                     <p class="total">TOTAL: 5&nbsp;208,50&nbsp;‚Ç¨</p>
                  </div>
               </div>
            </div>
         </section>
         <!-- Galeria de fotos do destino -->
         <section id="fotos" class="card">
            <h2 class="section-title">Fotos do destino</h2>
            <div class="gallery">
               <figure>
                  <img src="/Images/CL/santiago-chile.jpg" alt="Santiago do Chile" />
                  <figcaption>Santiago</figcaption>
               </figure>
               <figure>
                  <img src="/Images/CL/torres-del-paine.jpg" alt="Torres del Paine" />
                  <figcaption>Torres del Paine</figcaption>
               </figure>
               <figure>
                  <img src="/Images/CL/punta-arenas.jpg" alt="Punta Arenas" />
                  <figcaption>Punta Arenas</figcaption>
               </figure>
               <figure>
                  <img src="/Images/CL/ptwilliams.jpg" alt="Porto Williams" />
                  <figcaption>Porto Williams</figcaption>
               </figure>
               <figure>
                  <img src="/Images/AR/terra-do-fogo.jpg" alt="Ushuaia - terra do fogo" />
                  <figcaption>Ushuaia - terra do fogo</figcaption>
               </figure>
               <figure>
                  <img src="/Images/AR/el-calafate.jpg" alt="El Calafate" />
                  <figcaption>El Calafate</figcaption>
               </figure>
               <figure>
                  <img src="/Images/AR/buenos-aires.jpg" alt="Buenos Aires" />
                  <figcaption>Buenos Aires</figcaption>
               </figure>
               <figure>
                  <img src="/Images/BR/rio-janeiro.jpg" alt="Rio de Janeiro" />
                  <figcaption>Rio de Janeiro</figcaption>
               </figure>
            </div>
         </section>
         <section id="nota" class="card">
            <div class="notice notice-banner" role="note" aria-label="Aviso">
               Este plano √© indicativo para se ter uma no√ß√£o de dura√ß√£o, escalas de voos e pre√ßo m√©dio de hot√©is.
               Os pre√ßos est√£o suscept√≠ves a altera√ß√µes. A pesquisa foi feita com 8 meses de anteced√™ncia. O pre√ßo total √© por pessoa em quarto duplo e com mala de por√£o no voos.
            </div>
            <!-- resto do conte√∫do -->
         </section>
         <!-- Voos -->
         <!-- Pesquisa din√¢mica de voos -->
         <section id="flight-search" class="card" aria-label="Pesquisar voos">
            <h2 class="section-title">Pesquisar voos por data</h2>
            <form id="flightSearchForm" class="grid-2" onsubmit="return false;">
               <div>
                  <label for="departureDate"><strong>Data de partida</strong></label><br/>
                  <input type="text" id="departureDate" name="departureDate" required class="mds-date-input" placeholder="aaaa-mm-dd" autocomplete="off"/>
               </div>
               <div style="align-self:end;">
                  <button id="btnSearchFlights" class="btn-tag" type="button">Procurar voos</button>
               </div>
               <!-- Origem e destino j√° no ecr√£: pode ajustar estes valores no HTML -->
               <input type="hidden" id="origin" value="LIS" />
               <input type="hidden" id="destination" value="SCL" />
            </form>
            <p id="flightSearchHint" class="muted" style="margin-top:8px;">
               Escolha a data e clique em <em>Procurar voos</em>. Os resultados ir√£o atualizar a tabela abaixo.
            </p>
         </section>
         <section id="voos" class="card">
            <h2 class="section-title">Voos</h2>
            <table aria-label="Voos">
               <thead>
                  <tr>
                     <th>Voos</th>
                     <th>Data</th>
                     <th>Origem</th>
                     <th>Destino</th>
                     <th>Partida</th>
                     <th>Chegada</th>
                     <th>Tempo</th>
                     <th>Escala</th>
                     <th class="right">Pre√ßo</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td>LA8147 + LA753</td>
                     <td>03-nov.-26</td>
                     <td>Lisboa - LIS</td>
                     <td>Santiago - SCL</td>
                     <td>09:40</td>
                     <td>21:10</td>
                     <td>14:30</td>
                     <td>01:10 em S√£o Paulo</td>
                     <td class="right">736,00&nbsp;‚Ç¨</td>
                  </tr>
                  <tr>
                     <td>LA1</td>
                     <td>06-nov.-26</td>
                     <td>Santiago - SCL</td>
                     <td>Puerto Natales - PNT</td>
                     <td>08:50</td>
                     <td>13:17</td>
                     <td>04:27</td>
                     <td></td>
                     <td class="right">146,00&nbsp;‚Ç¨</td>
                  </tr>
                  <tr>
                     <td>V5420</td>
                     <td>11-nov.-26</td>
                     <td>Punta Arenas - PUQ</td>
                     <td>Puerto Williams - WPU</td>
                     <td>10:00</td>
                     <td>11:15</td>
                     <td>01:15</td>
                     <td></td>
                     <td class="right">112,00&nbsp;‚Ç¨</td>
                  </tr>
                  <tr>
                     <td>AR1895</td>
                     <td>14-nov.-26</td>
                     <td>Ushuaia - USH</td>
                     <td>El Calafate - FTE</td>
                     <td>11:20</td>
                     <td>12:40</td>
                     <td>1:20</td>
                     <td></td>
                     <td class="right">210,00&nbsp;‚Ç¨</td>
                  </tr>
                  <tr>
                     <td>AR1897</td>
                     <td>16-nov.-26</td>
                     <td>El Calafate - FTE</td>
                     <td>Buenos Aires - AEP</td>
                     <td>16:30</td>
                     <td>19:30</td>
                     <td>3:00</td>
                     <td></td>
                     <td class="right">90,00&nbsp;‚Ç¨</td>
                  </tr>
                  <tr>
                     <td>AR1264</td>
                     <td>18-nov.-26</td>
                     <td>Buenos Aires - AEP</td>
                     <td>Rio de Janeiro - GIG</td>
                     <td>09:50</td>
                     <td>12:45</td>
                     <td>2:55</td>
                     <td></td>
                     <td class="right">183,00&nbsp;‚Ç¨</td>
                  </tr>
                  <tr>
                     <td>TP74</td>
                     <td>23-nov.-26</td>
                     <td>Rio de Janeiro - GIG</td>
                     <td>Lisboa - LIS</td>
                     <td>16:35</td>
                     <td>05:15</td>
                     <td>9:40</td>
                     <td></td>
                     <td class="right">699,00&nbsp;‚Ç¨</td>
                  </tr>
               </tbody>
            </table>
         </section>
         <!-- Hot√©is (com links) -->
         <section id="hoteis" class="card">
            <h2 class="section-title">Hot√©is</h2>
            <table aria-label="Hot√©is">
               <thead>
                  <tr>
                     <th>Hotel</th>
                     <th>Local</th>
                     <th>Check‚Äëin</th>
                     <th>Check‚Äëout</th>
                     <th>Noites</th>
                     <th>Regime</th>
                     <th class="right">Pre√ßo</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td><a class="hotel" href="https://www.booking.com/hotel/cl/plaza-san-francisco.pt-pt.html?aid=304142&label=gen173nr-10CAEoggI46AdIM1gEaEaIAQGYATO4AQfIAQzYAQPoAQH4AQGIAgGoAgG4AszVlMwGwAIB0gIkN2IxMTc4MTYtNjU5Yi00NDYxLTlmMjMtZjQwMTlkZTAxZDVl2AIB4AIB&sid=957479400a6c1f6c3601ef700b18ccfb&all_sr_blocks=17627103_91910720_2_41_0_264227&checkin=2026-11-03&checkout=2026-11-06&dest_id=-901202&dest_type=city&dist=0&group_adults=2&group_children=0&hapos=5&highlighted_blocks=17627103_91910720_2_41_0_264227&hpos=5&matching_block_id=17627103_91910720_2_41_0_264227&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&sr_pri_blocks=17627103_91910720_2_41_0_264227_42436&srepoch=1770335031&srpvid=26dda6b188dd0326&type=total&ucfs=1&" target="_blank" rel="noopener">Hotel Plaza San Francisco</a></td>
                     <td>Santiago</td>
                     <td>3 novembro</td>
                     <td>6 novembro</td>
                     <td>3</td>
                     <td>PA</td>
                     <td class="right">180,00&nbsp;‚Ç¨</td>
                  </tr>
                  <tr>
                     <td><a class="hotel" href="https://www.booking.com/hotel/cl/costanera-puerto-natales.pt-pt.html?aid=304142&label=gen173nr-10CAEoggI46AdIM1gEaEaIAQGYATO4AQfIAQzYAQPoAQH4AQGIAgGoAgG4AszVlMwGwAIB0gIkN2IxMTc4MTYtNjU5Yi00NDYxLTlmMjMtZjQwMTlkZTAxZDVl2AIB4AIB&sid=957479400a6c1f6c3601ef700b18ccfb&all_sr_blocks=933751501_365458647_2_1_0_220813&checkin=2026-11-06&checkout=2026-11-09&dist=0&group_adults=2&group_children=0&hapos=3&highlighted_blocks=933751501_365458647_2_1_0_220813&hpos=3&matching_block_id=933751501_365458647_2_1_0_220813&nflt=roomfacility%3D38%3Breview_score%3D80%3Bht_id%3D204&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&sr_pri_blocks=933751501_365458647_2_1_0_220813_77836&srepoch=1770335103&srpvid=befca6eca70c0070&type=total&ucfs=1&" target="_blank" rel="noopener">Hotel Costanera</a></td>
                     <td>Puerto Natales</td>
                     <td>6 novembro</td>
                     <td>9 novembro</td>
                     <td>3</td>
                     <td>PA</td>
                     <td class="right">330,00&nbsp;‚Ç¨</td>
                  </tr>
                  <tr>
                     <td><a class="hotel" href="https://www.booking.com/hotel/cl/cabo-de-hornos.pt-pt.html?aid=304142&label=gen173nr-10CAEoggI46AdIM1gEaEaIAQGYATO4AQfIAQzYAQPoAQH4AQGIAgGoAgG4AszVlMwGwAIB0gIkN2IxMTc4MTYtNjU5Yi00NDYxLTlmMjMtZjQwMTlkZTAxZDVl2AIB4AIB&sid=957479400a6c1f6c3601ef700b18ccfb&all_sr_blocks=27440301_89155844_0_41_0&checkin=2026-11-09&checkout=2026-11-11&dest_id=-897667&dest_type=city&dist=0&group_adults=2&group_children=0&hapos=1&highlighted_blocks=27440301_89155844_0_41_0&hpos=1&matching_block_id=27440301_89155844_0_41_0&nflt=review_score%3D80%3Broomfacility%3D38&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&sr_pri_blocks=27440301_89155844_0_41_0__53000&srepoch=1770335215&srpvid=1f8ea7295e790367&type=total&ucfs=1&" target="_blank" rel="noopener">Hotel Cabo de Hornos</a></td>
                     <td>Punta Arenas</td>
                     <td>9 novembro</td>
                     <td>11 novembro</td>
                     <td>2</td>
                     <td>PA</td>
                     <td class="right">224,50&nbsp;‚Ç¨</td>
                  </tr>
                  <tr>
                     <td><a class="hotel" href="https://www.booking.com/hotel/cl/errante-ecolodge.pt-pt.html?aid=304142&label=gen173nr-10CAEoggI46AdIM1gEaEaIAQGYATO4AQfIAQzYAQPoAQH4AQGIAgGoAgG4AszVlMwGwAIB0gIkN2IxMTc4MTYtNjU5Yi00NDYxLTlmMjMtZjQwMTlkZTAxZDVl2AIB4AIB&sid=957479400a6c1f6c3601ef700b18ccfb&all_sr_blocks=191541404_413431291_2_40_0&checkin=2026-11-11&checkout=2026-11-12&dest_id=-897524&dest_type=city&dist=0&group_adults=2&group_children=0&hapos=2&highlighted_blocks=191541404_413431291_2_40_0&hpos=2&matching_block_id=191541404_413431291_2_40_0&nflt=roomfacility%3D38%3Breview_score%3D80&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&sr_pri_blocks=191541404_413431291_2_40_0__25704&srepoch=1770335292&srpvid=e19ba7527f0f00ce&type=total&ucfs=1&" target="_blank" rel="noopener">Errante Ecolodge</a></td>
                     <td>Puerto Williams</td>
                     <td>11 novembro</td>
                     <td>12 novembro</td>
                     <td>1</td>
                     <td>PA</td>
                     <td class="right">109,00&nbsp;‚Ç¨</td>
                  </tr>
                  <tr>
                     <td><a class="hotel" href="https://www.booking.com/hotel/ar/canal-beagle-ushuaia.pt-pt.html?aid=304142&label=gen173nr-10CAEoggI46AdIM1gEaEaIAQGYATO4AQfIAQzYAQPoAQH4AQGIAgGoAgG4AszVlMwGwAIB0gIkN2IxMTc4MTYtNjU5Yi00NDYxLTlmMjMtZjQwMTlkZTAxZDVl2AIB4AIB&sid=957479400a6c1f6c3601ef700b18ccfb&all_sr_blocks=801707902_341407502_2_1_0&checkin=2026-11-12&checkout=2026-11-14&dest_id=-1018179&dest_type=city&dist=0&group_adults=2&group_children=0&hapos=2&highlighted_blocks=801707902_341407502_2_1_0&hpos=2&matching_block_id=801707902_341407502_2_1_0&nflt=review_score%3D80%3Broomfacility%3D38%3Bht_id%3D204&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&sr_pri_blocks=801707902_341407502_2_1_0__36320&srepoch=1770335402&srpvid=4bada7858a59031c&type=total&ucfs=1&" target="_blank" rel="noopener">Hotel Canal Beagle</a></td>
                     <td>Ushuaia</td>
                     <td>12 novembro</td>
                     <td>14 novembro</td>
                     <td>2</td>
                     <td>PA</td>
                     <td class="right">154,00&nbsp;‚Ç¨</td>
                  </tr>
                  <tr>
                     <td><a class="hotel" href="https://www.booking.com/hotel/ar/esplendor-calafate.pt-pt.html?aid=304142&label=gen173nr-10CAEoggI46AdIM1gEaEaIAQGYATO4AQfIAQzYAQPoAQH4AQGIAgGoAgG4AszVlMwGwAIB0gIkN2IxMTc4MTYtNjU5Yi00NDYxLTlmMjMtZjQwMTlkZTAxZDVl2AIB4AIB&sid=957479400a6c1f6c3601ef700b18ccfb&all_sr_blocks=7925609_90438237_3_1_0&checkin=2026-11-14&checkout=2026-11-16&dest_id=-985388&dest_type=city&dist=0&group_adults=2&group_children=0&hapos=14&highlighted_blocks=7925609_90438237_3_1_0&hpos=14&matching_block_id=7925609_90438237_3_1_0&nflt=roomfacility%3D38%3Bht_id%3D204%3Breview_score%3D80&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&sr_pri_blocks=7925609_90438237_3_1_0__65484&srepoch=1770335465&srpvid=af30a7ab11aa009d&type=total&ucfs=1&" target="_blank" rel="noopener">Esplendor by Wyndham</a></td>
                     <td>El Calafate</td>
                     <td>14 novembro</td>
                     <td>16 abril</td>
                     <td>2</td>
                     <td>PA</td>
                     <td class="right">277,50&nbsp;‚Ç¨</td>
                  </tr>
                  <tr>
                     <td><a class="hotel" href="https://www.palosantohotel.com/" target="_blank" rel="noopener">Palo Santo Hotel</a></td>
                     <td>Buenos Aires</td>
                     <td>16 novembro</td>
                     <td>18 novembro</td>
                     <td>1</td>
                     <td>PA</td>
                     <td class="right">223,00&nbsp;‚Ç¨</td>
                  </tr>
                  <tr>
                     <td><a class="hotel" href="https://www.booking.com/hotel/br/rio-de-janeiro.pt-pt.html?aid=304142&label=gen173nr-10CAEoggI46AdIM1gEaEaIAQGYATO4AQfIAQzYAQPoAQH4AQGIAgGoAgG4AszVlMwGwAIB0gIkN2IxMTc4MTYtNjU5Yi00NDYxLTlmMjMtZjQwMTlkZTAxZDVl2AIB4AIB&sid=957479400a6c1f6c3601ef700b18ccfb&all_sr_blocks=1182540_95134727_2_34_0&checkin=2026-11-18&checkout=2026-11-23&dest_id=11825&dest_type=hotel&dist=0&group_adults=2&group_children=0&hapos=1&highlighted_blocks=1182540_95134727_2_34_0&hpos=1&matching_block_id=1182540_95134727_2_34_0&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&sr_pri_blocks=1182540_95134727_2_34_0__1108383&srepoch=1770335697&srpvid=d5b2a82379c104be&type=total&ucfs=1&" target="_blank" rel="noopener">Fairmont Rio</a></td>
                     <td>Rio de Janeiro</td>
                     <td>18 novembro</td>
                     <td>23 novembro</td>
                     <td>5</td>
                     <td>PA</td>
                     <td class="right">1130,00&nbsp;‚Ç¨</td>
                  </tr>
               </tbody>
            </table>
            <p class="muted">üëâ Os pre√ßos indicados s√£o por pessoa em quarto duplo.</p>
         </section>
         <!-- ========================= -->
         <!-- PLANO DI√ÅRIO COM DETALHES EM LINHA -->
         <!-- ========================= -->
         <section id="plano" class="card">
            <h2 class="section-title">Plano di√°rio</h2>
            <!-- Legenda e a√ß√µes -->
            <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; margin-bottom:10px;">
               <p class="muted" style="margin:0;">
                  <span class="tag tag-voo">avi√£o</span>
                  <span class="tag tag-comboio">comboio</span>
                  <span class="tag tag-tour">tour</span>
                  <span class="tag tag-autocarro">autocarro</span>
                  <span class="tag tag-ferry">ferry</span>
               </p>
               <div style="display:flex; gap:8px;">
                  <button type="button" class="btn-outline" id="expandAll">Expandir todos</button>
                  <button type="button" class="btn-outline" id="collapseAll">Ocultar todos</button>
               </div>
            </div>
            <!-- Lista √© gerada por JS -->
            <div id="dailyList" data-trip="patagonia1"></div>
         </section>
         <!-- Tours sugeridos -->
         <section id="tours" class="card">
            <h2 class="section-title">Tours e transportes obrigat√≥rios</h2>
            <ul>
               <li><a class="hotel" href="https://www.civitatis.com/pt/puerto-natales/excursao-parque-torres-paine/?srsltid=AfmBOoqlb4zInSSvByn4AshX-cextxVRuesYNoJppdwp4XVTzurhgiCK#detalhes">Torres del Paine - a partir de Puerto Natales (79,00 ‚Ç¨) </a></li>
               <li><a class="hotel" href="https://www.civitatis.com/pt/puerto-natales/excursao-glaciares-balmaceda-serrano-barco/?srsltid=AfmBOorfhYy7mJUc1CIcWt9vPFQknZfAZ9B3bvj0-oD6xSP_8qzwDOMu">Glaciares Balmaceda e Serrano, de barco - a partir de Puerto Natales (118,00 ‚Ç¨)</a></li>
               <li><a class="hotel" href="https://www.civitatis.com/pt/puerto-natales/excursao-parque-torres-paine/?srsltid=AfmBOoqlb4zInSSvByn4AshX-cextxVRuesYNoJppdwp4XVTzurhgiCK#detalhes">Glaciar Perito Moreno - a partir de El Calafate (127,00 ‚Ç¨)</a></li>
               <li><a class="hotel" href="https://www.busbud.com/es-419/cl-cl/autobus-puerto-natales-punta-arenas/r-sem/4qu3wn-4qt9d1?utm_source=google&utm_medium=cpc&utm_campaign=route-bus-2025-es-chile&gad_source=1&gad_campaignid=22149382942&gbraid=0AAAAADiKd4VVWtSFlm7RDSodSexHJ-wDK&gclid=CjwKCAiAv5bMBhAIEiwAqP9GuLrjw8VhVp1gmlRrhUcNrnmpFEvKwSLLgNR9UgWe8F8yiAzzhi90ZBoCOuwQAvD_BwE">Autocarro Puerto Natales - Punta Arenas (8,00 ‚Ç¨) </a></li>
               <li><a class="hotel" href="https://www.civitatis.com/pt/ushuaia/excursao-tierra-fuego-trem-fim-mundo/?_gl=1*8nhlmx*_up*MQ..*_ga*MTIzODYyOTk0OS4xNzcwMzg2MTE4*_ga_QJQ54CTKPM*czE3NzAzODYxMTgkbzEkZzAkdDE3NzAzODYxMTgkajYwJGwwJGgw*_ga_216706797*czE3NzAzODYxMTgkbzEkZzAkdDE3NzAzODYxMTgkajYwJGwwJGgxNzIxMzc2NDYx">Terra do Fogo (72,95 ‚Ç¨) </a></li>
            </ul>
         </section>
      </main>
      <footer>
         <p>&copy; Mala de Sonhos ‚Ä¢ Ana Valente </p>
      </footer>
      <script>
         (function(){
           const btn = document.getElementById('btnSearchFlights');
           const dateInput = document.getElementById('departureDate');
           const tbody = document.querySelector('#voos table tbody');
           const flights = [
             ["LIS", "SCL", 0],
             ["SCL", "PNT", 3],
             ["SCL", "PNT", 3],
             ["PUQ", "WPU", 8],
             ["USH", "FTE", 8],
             ["FTE", "AEP", 14],
             ["AEP", "GIG", 16],
             ["GIG", "LIS", 21]
           ];

           async function runSearch(){
             if(!dateInput.value) { dateInput.focus(); return; }
         
             const isoDate = dateInput.value; // yyyy-mm-dd
         
             // Loading state
             if(tbody){
               tbody.innerHTML = '<tr><td colspan="9">A procurar voos‚Ä¶</td></tr>';
             }
         
             try{
         
               const offers = await getAllOffers(isoDate, flights);
         
               if (offers.some(o => o.length === 0)) {
                 tbody.innerHTML = '<tr><td colspan="9">H√° pelo menos um dos trajetos para o qual n√£o foi encontrado voo.</td></tr>';
                 return;
               }
         
               // Map first up to 10 results onto the table schema
               const rows = offers.slice(0,10).map(o => {
                 const itin0 = o.itineraries?.[0];
                 const seg0 = itin0?.segments?.[0];
                 const lastSeg = itin0?.segments?.[itin0.segments.length-1];
                 const dep = seg0?.departure?.at?.substring(11,16) || '';
                 const arr = lastSeg?.arrival?.at?.substring(11,16) || '';
                 const depAirport = getAirportLabel(seg0?.departure.iataCode);
                 const arrAirport = getAirportLabel(lastSeg?.arrival.iataCode);
                 const stops = getStops(itin0);
                 const duration = itin0?.duration?.replace('PT','').toLowerCase() || '';
                 const code = o.validatingAirlineCodes?.[0] || (seg0?.carrierCode||'') + (seg0?.number||'');
                 const price = o.price?.total || '';
                 const datePretty = seg0?.departure.at.split("T")[0].split('-').reverse().join('-');
                 const flightNumber = itin0.segments?.map(seg => seg.carrierCode + seg.number).join(" + ");
                 
                 return `
                   <tr>
                     <td>${flightNumber}</td>
                     <td>${datePretty}</td>
                     <td>${depAirport}</td>
                     <td>${arrAirport}</td>
                     <td>${dep}</td>
                     <td>${arr}</td>
                     <td>${duration}</td>
                     <td>${stops === 0 ? '' : stops.toString()}</td>
                     <td class="right">${price ? price + ' ‚Ç¨' : ''}</td>
                   </tr>`; 
               }).join('');
               tbody.innerHTML = rows;
             }catch(err){
               console.error(err);
               tbody.innerHTML = '<tr><td colspan="9">Ocorreu um erro ao procurar voos.</td></tr>';
             }
           }
         
           if(btn){ btn.addEventListener('click', runSearch); }
           if(dateInput){ dateInput.addEventListener('change', ()=>{ /* optional auto-search */ }); }
         })();
      </script>
      <script src="/scripts/datepicker.js"></script>
      <script>
         window.FLIGHTS_API_URL = '/api/flights';
      </script>
      <script src="/scripts/search-flights.js"></script>
      
   </body>
</html>